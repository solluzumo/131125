## Немного о функционале
Сервис предоставляет возможность проверки работоспособности URL и создания PDF из нескольких наборов заранее проверенных URL.

## Немного о отказоустойчивости
Читая пункт об отключении и перезагрзуке, я понял его так: сервис должен уметь выключаться правильным образом, что-то вроде gracefull shutdown, который предполагает, что сначала нужно подождать завершения всех работ 
и только потом уже выключаться, при этом сервис может принимать запросы во время отключения (!!!). Но зачем принимать просто так запросы во время отключения? Правильно, не за чем, а значит мы их будем сохранять 
для обработки в будущем!

Поэтому было реализован функцонал для сохранения задач в json, а при запуске сервиса, мы быстренько перегружаем задачи из json в основной канал с задачами.

## Немного про работяг(воркеров) и каналы
Сервис использует горутины и каналы для распараллеливания (тьфу ты) процесса обработки запросов. Сервис создаёт специальный канал под задачи(в config настраивется размер), там же инициализируется буфер на случай 
переполнения, к нему подключаются воркеры и ждут Task. За своевременную перекачку задач из буфера в основной поток ответственна фоновая горутина, запускаемая каждые N секунд.

Task имеет три типа: проверка URL, создание PDF и третий тип - возврат значения. Возврат значения нужен для случаев, когда пользователь отправляет запрос во время отключения
сервиса. Так как никакой сервер на земле, к сожалению, пока что не умеет обрабатывать запрос будучи полностью отключенным, мы будем просить клиентов, если они прям ОЧЕНЬ хотят все таки узнать, 
каков результат их запроса, обращаться к другому endpoint, который как раз и будет заниматься особым, третьим, типом Task - GiveResult. 

В теории можно еще настроить кэш, чтобы если пользователь делал тот же самый запрос, что и во время отключения, мы могли просто вернуть значение, но внешняя инфраструктура запрещена, да и это вроде выходит за рамки
ТЗ.

## Отключение
Для "плавного" отключения был предусмотрен отдельный endpoint, во время отключения сервис закрывает все свои каналы, сохраняет задачи из основного потока и буфера и отсылает победное "Сервер завершил работу"


## Установка и тестирование

Клонируем репозиторий 
```
git clone https://github.com/solluzumo/131125.git
cd 131125/
```

Устанавливаем зависимости
```
go mod download
```

Запускаем проект
```
go run cmd/main.go
```

## Эндпоинты для тестирования

Примеры для hey
Проверка работоспособности URL
```
POST http://localhost:8080/links
{
    "links":["https://habr.com"]
}
```

Получение pdf
```
POST http://localhost:8080/get-pdf
{
    "links_list":[
      "id1",
      "id2",
      "id3"
    ]
}

```

Получение результатов работы сервиса после перезагрзуки
```
GET http://localhost:8080/get-result/task-id
```
